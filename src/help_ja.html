<!DOCTYPE HTML>
<html lang="ja">
<head>
 <meta charset="UTF-8" />
 <meta http-equiv="Content-Security-Policy" content="script-src 'self' 'unsafe-inline'">
 <title>LizGobanヘルプ</title>
 <link rel="stylesheet" href="help.css">
 <script src="help.js"></script>
</head>

<body>

<h1><a name="top">LizGoban <span class="ver"></span>ヘルプ</h1>

LizGobanは、<span class="ext" data-url="https://github.com/gcp/leela-zero">Leela Zero</span>と<span class="ext" data-url="https://github.com/lightvector/KataGo">KataGo</span>を用いた囲碁の分析ツールです。

<!--
<hr>

以下はLizGoban 0.4.1（2020年4月24日）のヘルプの日本語訳です。
最新版とは異なる箇所があるかもしれません。参考としてお使いください。
-->

<hr>

<h2><a name="Display">画面表示</a></h2>

<h3>碁盤</h3>

［候補手］
<ul>
 <li>色：勝率</li>
 <li>不透明度：読んだ手数</li>
 <li>番号：推奨順位</li>
</ul>

<p>
ふだんは黄色（普通）、オレンジ（悪い）、赤（非常に悪い）の円が表示されます。相手が悪い手を打ったときには、水色(非常に良い)と緑(良い)の円も表示されるでしょう。小さな三角形は主要でない候補手です。小さな赤い円は、まだ読んでいない次の候補です。
</p>

<p>
<a name="Mouse">［マウス操作］</a>
<ul>
 <li>クリック：石を打つ</li>
 <li>候補手にマウスカーソルをかざす：想定手順を表示
      <ul>
       <li>解析が進んで推奨手が変わると、古い推奨手に×印がついて、かわりの推奨手が◇印で示されます。</li>
       <li>Ctrlなど「意味のないキー」を押し離しすれば表示が更新されます。</li>
      </ul>
 </li>
 <li>右クリック：前の手と同じ色の石を打つ（この機能は将来廃止されるかもしれません）</li>
 <li>石をクリック：そのときの盤面を一時的に表示</li>
 <li>石をダブルクリック：その手を打つ直前の盤面へ</li>
 <li>Altキーを押しながらドラッグ：分析する領域を制限 (Alt+クリック：領域制限を解除)</li>
 <li>CtrlキーとShiftキーを押しながらクリック：棋譜を編集
      <ul>
       <li>（空点上で）その手を挿入</li>
       <li>（石上で）その手を削除</li>
      </ul>
 </li>
 <li>bキーかwキーを押しながらクリック：色を固定して同上</li>
</ul>
</p>

<p>
［分岐］
<ul>
 <li>点線四角：分岐（＝子ノード）</li>
 <li>点線三角：一手前の分岐（＝兄弟ノード）</li>
</ul>
上記マーク内のタグ文字「d」「e」…に対応するキーを押し続ければ分岐をプレビューできます。その状態でEnterキーを押すと、別の検討用碁盤でその分岐を展開します。あるいは、点線四角をクリックしても分岐を展開できます。
</p>

<p>
直近の着手に対して、その手を打つ前と打った後とで第一候補手が変わった場合には、それぞれに青と赤の四角い枠が表示されます。これによってエンジンの意見の変化に気づくことができるでしょう。この枠の角についている黒色／白色は、黒番時／白番時の意見を表します（訳注：当初は次にここへ打つ想定だったけれど、前の手を打たれてから考え直したらこちらがよさそう、等）。同様の枠は変化図にも表示されます。これは特にAI対AIを観戦しているときに便利です。たとえば「8手先で開いてくると黒は読んでいるけれど、白はそこで切るつもりだ！」などがわかります。(「Engine」メニューの「白番は別のウェイトを使う(Alternative weights for white)」や、「Tool」メニューの「AI対AI (AI vs AI)」を参照。詳しく見るには「<a href="#side-by-side">隣に並べて比較</a>」も参照)
</p>

<p>
また、「View」メニューで「Lizzie風(Lizzie style)」を選択することもできます（上の数字＝勝率、下の数字＝読んだ手数）。KataGoを使用し、「View」メニューの「スコアバー(Score bar)」にチェックを入れると、上の数字がスコアに置き換わります。
</p>

<p>
（実験中：シチョウ表示）
シチョウを打つと、シチョウのぶつかり先に「=」印がつきます。「=」キーを押し続ければシチョウの続きを表示し、その状態でさらにEnterキーを押すと続きを実際に打ちます（検討用の別碁盤上で）。「=」キーで一度シチョウを表示しておけば、そのあと盤面が変わって「=」印が消えても、また「=」キーを押して「さっきのシチョウは今だとどうか」を試すこともできます。ただし今のところシチョウ検出が雑なので、シチョウでない場合もときどき誤って「=」印がついてしまいます。
</p>

<h3>勝率バー</h3>

<ul>
 <li>黒／白の範囲：現在の盤面の勝率</li>
 <li>緑・赤の四角：直近の着手による勝率の変化（緑＝良、赤＝悪）</li>
 <li>扇型：各候補手の評価（上下位置＝読んだ手数、大きさ＝事前確率、青＝実際に打たれた手）</li>
 <li>逆向きで白抜きの扇型：直近の着手の評価（その手を実際に打つ前に予想していた評価）</li>
 <li>灰色の数字：一番読んだ手の読み手数（＝勝率バーの最上部）</li>
 <li>灰色の軌跡：探索の進行による評価の推移</li>
</ul>

「x」キーを押し続けると、勝率バーが拡大されます。「View」メニューの「勝率バーの拡大(Expand winrate bar)」も参照してください。勝率バーを拡大しているときは、今どの手を読んでいるかがオレンジ色の丸で表示されます。丸の大きさは注力の度合です。さらに、オレンジ色の斜めの線がPUCT（分析の優先度）（x軸＝PUCT、y軸＝現在の勝率＋PUCTで予測される将来の位置）、オレンジ色の横線がLCB（推奨順位の基準）を示します。

<h3>勝率グラフ</h3>

主線：黒の勝率
<ul>
 <li>緑の線分：好手（勝率アップ）</li>
 <li>赤の線分：悪手（勝率ダウン）</li>
 <li>黄色の線分：エンジンが見逃した予想外の好手</li>
 <li>黄色の縦線：評価の誤差（「着手前に予想した評価」と「実際の着手後の評価」との差）</li>
 <li>紫色の薄い線分：他のエンジンによる推定</li>
</ul>

追加プロット［K＝KataGoのみ］
<ul>
 <li>オレンジ色の点：黒の推定スコア［K］</li>
 <li>緑／ピンクの階段：累積スコア損失（訳注：最善手とくらべて、のべ何目損したか）［K］</li>
 <li>赤点：石の死活の曖昧さ（100％活きや100％死にだと低下。訳注：どれくらい激しい碁か、どのあたりからヨセか、などの目安）［K］</li>
 <li>上部の交互に並んだ円：コウ争い（o / x＝ツギ／抜きで解消）</li>
 <li>グラフ中段の虹色のバー：着手場所（左＝紫、中央＝白など）</li>
 <li>グラフ横の虹色の四角：ゾーンカラーマップ（訳注：着手場所と色の対応関係）</li>
</ul>

グラフ上でクリック／ドラッグすると、対応する手に移動します。「x」キーを押し続けると、勝率グラフとゾーンカラーマップが拡大表示されます。「c」キーを押しながらグラフ上にマウスをかざすと、過去／未来の碁盤が一時的に表示されます。AI対AIを観戦しているときは、緑とピンクの線がそれぞれ黒と白のエンジンによる推定勝率を表します。

<h3>ウィンドウタイトル</h3>

エンジン名などの情報はウィンドウタイトルに表示されます。エンジン名の後の「!」は置き碁用の「上手モード」を表します（KataGoのみ）。

<h3>コメント</h3>

直前の着手に対するコメントは勝率グラフやボタン群の下に表示されます。コメントが長い場合はクリックすると全体を見ることができます（同時にクリップボードにもコピーされます）。コメントを編集するには「Edit」メニューの「Info」を使ってください。

<h3>解析手数グラフ</h3>

<a href="#layout">横向きレイアウト</a>の場合にはもう一つ、解析した手数の経過を表すグラフがウィンドウの右下に小さく表示されます。このグラフを拡大するには、「View」メニューで「double_boards」を選択して「x」キーを押してください（訳注：勝率グラフのあった位置に大きく表示されます）。

<ul>
 <li>x軸：この盤面で読んだ手数の総計</li>
 <li>y軸：各候補手を読んだ回数</li>
 <li>点々つきの線：実際に打たれた手</li>
 <li>太線：最善手</li>
</ul>

<h3>碁盤上のその他のマーク</h3>

<a href="#Katago">KataGoの項</a>を参照してください。

<hr>

<h2><a name="Tips">小技いろいろ</a></h2>

<h3>便利キー</h3>

マウス／タッチパッド派の方でも、キーボード左下の4つのキー<a href="#ZXCKey">「z」「x」「c」</a>「v」は使うと便利でしょう。一つずつ押してみて、押しているあいだは碁盤の表示がどう変わるか試してください。ただし<a href="#VKey">「v」キー</a>はKataGo専用です。

<h3><a name="TrialBoard">検討用碁盤(trial board)</a></h3>

既存の対局に対して別の手を打つと、新しい碁盤が作成されます。碁盤の縁に違う色がついているのが「検討用碁盤」を表します。検討用碁盤は、<a href="#Boards">「q」キー</a>で手早く削除することができます（削除の取り消し：Ctrl + z）。「Edit」メニューから「検討用碁盤(trial board)」のチェックを外すと、ふつうの碁盤になります。石を打つとき「クリック」の代わりに「Ctrl+クリック」を使えば、新しい検討用碁盤でその手を打つことができます。

<h3>ドラッグ＆ドロップ</h3>

SGFファイルやURL（訳注：Webブラウザのリンクなど）や盤面画像をLizGobanにドラッグ＆ドロップして開くことができます。

<h3>消えた碁盤の復元</h3>

「Edit」メニューの「削除された盤を戻す(Undelete board)」はセッションをまたいで動作します。意図せずLizGobanを終了してしまった場合に消えた碁盤を復元するには、Ctrl+zを試してみてください。

<h3>（手加減された）エンジンとの対戦</h3>

<p>
「File」メニューの「Match vs AI」をクリックして、「vs.」の横のプルダウンメニューからAIの戦略を選んでください。
<ul>
 <li>normal: 手加減なしの全力</li>
 <li>diverse: 全力だが序盤はランダムな変化を加える</li>
 <li>persona: 様々な棋風の弱いAI（要KataGo v1.11.0以降）</li>
</ul>
「persona」を選んだ場合には、「...」ボタンから対局相手を決められます。
<ul>
 <li>棋風をランダムに生成: 「Generate」ボタンをクリック</li>
 <li>仮想的な対局相手: 任意の名前を入力すると、その名前にもとづいた棋風の相手が生成されます。いろいろな名前を試してお気に入りの対局相手をみつけてください。</li>
 <li>あらかじめ設定された棋風: 「envy」など名前のついたボタンをクリック</li>
</ul>
また、「sanity」（正気度）スライダーもいつでも調整できます。自動調整するには「auto」にチェックを入れてください。なお、不合理そうな戦略でも「sanity」を高くすれば手強くなってきます。相手が打つ手はAIの上位候補の中からしか選ばれないためです。
</p>

<p>
(この下は旧版の説明です)
</p>

<ul>
 <li>weak n: n=1 (やや弱い) to n=9 (非常に弱い)</li>
 <li>-Xpt (KataGoのみ): X目くらい損な手を毎回選ぶ</li>
</ul>

ただし、強いエンジンはある程度の考慮時間を与えないと悪手を思いつかないかもしれません。ここまでで十分なら以下は読み飛ばして結構です。

<p>
<ol>
 <li>「View」メニューの「Raw board」を選択する</li>
 <li>自分の手番では碁盤をクリックして石を置く</li>
 <li>エンジンの手番ではEnterキーを押す<br>
      または、「1」, 「2」, ... , 「9」キーを押す（1=やや弱い手、9=非常に弱い手）<br>
      または、「0」キーを押す（勝率に余裕があるときにパスする）</li>
</ol>
「Z」キーを押し続けると、候補手を見ることができます。
</p>

<p>
さらに別のハンデとして、異なるエンジンをランダムに混ぜて対戦することもできます。
<ol>
 <li>「View」メニューで「Raw board」を選択する</li>
 <li>「Engine」メニューの「Load network weights」からウェイトファイル（例：LZ38、訳注：弱いウェイト）を選択する</li>
 <li>「Engine」メニューの「Alternative weights for white」から別のウェイトファイル（例：LZ157、訳注：強いウェイト）を選択する</li>
</ol>
この状態でEnterキーを押すと、ふつうは白番にはLZ157が使用されます。しかし、「1」キーを押すと、10%の確率でLZ38が白番に使われます。「2」キーで20％、「3」キーで30％、...、「9」キーで90％となっていきます。
</p>

<h3><a name="layout">UIレイアウト</a></h3>

(今のところ、ウィンドウのサイズを変更することで横向き／縦向きのレイアウトを切り替えることができます。ただし後者はもう保守されておらず、将来のバージョンでは消去予定です。)

<h3><a name="letmethink">まず考えさせて(Let me think first)モード</a></h3>

「View」メニューで「Let me think first」を選択すると、「Tool」メニューから「自動リプレイ(Auto replay)」や「AI対AI」を使った際、進行度0%〜50%の間はノーヒントの盤面を表示して50%〜100%の間は候補手を表示します。途中でこの表示を切り替えたくなったときには<a href="#Tab">「Tab」キー</a>を使用します。自動進行でないときに同じようなことをしたければ、<a href="#semicolon">「;」キー</a>をくり返し押してください（訳注：押すたびに、「候補手を表示」「候補手を消して一手進む」をくり返す）。

<h3>個人練習帳</h3>

<p>
［Tool］メニューの［練習問題として保存(Store as exercize)］で現在の盤面を記憶し、［練習問題(Exercize)］で記憶した盤面をランダムに表示することができます（訳注：記憶は「!」キー、出題は「?」キーでもできます）。対局モードを抜けるには［stop match］ボタンを押してください（そのあともし解析結果が表示されなければTabキーかZキーを押してください）。
</p>

<p>
★マークの横の「+」「-」ボタンを押せば、その練習問題の出題頻度を上げ下げできます。
</p>

<h3>盤面画像の取り込み</h3>

<p>
何かの盤面画像をコピーして、LizGoban上でCtrl+Vキーを押すかメニューの"Edit > Paste"を選べば、石の配置を取り込むことができます。画像をLizGoban上にドラッグ＆ドロップしても同様です。
</p>

<p>
この機能はごく簡易なものです。反射光のある実物の碁盤写真やマーク・数字・光沢がついた石では、設定調整や手動修正が必要かもしれません。それでもインターネット上の多くの詰碁画像や対局・解説動画の盤面などはこの機能を使って取り込むことができます。
</p>

<h3>死活問題の解析：詰碁用フレーム (実験中)</h3>

この機能は実験中です。多くを期待しないでください。

<ol>
 <li>問題図のとおりに石を置く。同じ色の石を続けて置くには右クリック。</li>
 <li>"Tool > Experimental > Tsumego frame"を選んで残りの領域を埋める。</li>
 <li>スペースキーで解析を開始して推奨手を見る。</li>
</ol>

分析領域の制限については<a href="#Mouse">［マウス操作］</a>を参照。

<!--
<h3>Backward scan in auto-analysis</h3>

There is a
<span class="ext" data-url="https://github.com/kaorahi/leela-zero/tree/ladder_revtrans">modified Leela Zero</span>
that do not forget promising moves after undo.
Replace leelaz with it and
set auto analysis visits as a negative value for backward analysis
(scan from the last move to the first move)
to get possibly better evaluations when some moves are in "blind spots" of Leela Zero.
-->

<hr>

<h2><a name="Shortcut">ショートカットキー</a></h2>

<h3>着手</h3>
<ul>
 <li>上／左矢印キー：一手戻る（シフトキーを押しながらだと15手戻る)</li>
 <li>下／右矢印キー：一手進む（シフトキーを押しながらだと15手進む)</li>
 <li>Homeキー：初手へ</li>
 <li>Endキー：最終手へ</li>
 <li>BS/Delキー：手を戻す（訳注：最後の一手ならハガす、それ以外は単に一手戻る）</li>
 <li>pキー：パスする</li>
 <li>#キー：コメントを表示する</li>
</ul>

初手(最終手)でさらに上／左矢印キー（下／右矢印キー）を押し続けると、Endキー（Homeキー）として機能します。

<h3><a name="Boards">碁盤</a></h3>
<ul>
 <li>Ctrl+n：新規対局</li>
 <li>Shift+n：新規碁盤</li>
 <li>Ctrl+d：碁盤の複製</li>
 <li>[：前の碁盤</li>
 <li>]：次の碁盤</li>
 <li>Ctrl+x：碁盤の削除（Ctrl+z：削除の取り消し）</li>
 <li>Ctrl+w：碁盤の削除／ウィンドウを閉じる</li>
 <li>q：Ctrl+xと同じ (<a href="#TrialBoard">検討用碁盤(trial board)</a>のみ)</li>
</ul>

<h3>分析</h3>
<ul>
 <li>スペースキー：分析の一時停止／再開</li>
 <li>a：自動分析の開始／停止（読む手数を入力してEnterキーを押して開始）</li>
 <li>Enter：最善手を打つ（Shift＝5手進む）</li>
 <li>`（バッククォート）：別の碁盤で最善手を打つ</li>
 <li>,（コンマ）：想定手順を打つ</li>
 <li>Altキーを押しながらhjkl：分析する領域を制限（Alt+[：領域制限を解除）</li>
</ul>

<h3>表示</h3>

<a name="ZXCKey">（押し続ける）</a>
<ul>
 <li>z：候補手やマークなどを隠す (「View」メニューの一部のスタイルでは逆に候補手を一時表示）</li>
 <li>x：グラフやコメント表示を大きく</li>
 <li>c：着手番号と座標を表示</li>
      <ul>
       <li> + 石の上にマウスカーソルをかざす：その時点の盤面を表示</li>
       <li> + 石の上でマウスクリック：その手に移動</li>
      </ul>
 <li>1, 2, ...., 9, 0：n番目の候補手の想定手順を表示 (0 = 実際に打たれた手からの想定手順)</li>
      <ul>
       <li> + Enter：その手を打つ</li>
       <li> + `（バッククォート）：別の碁盤でその手を打つ</li>
       <li> + ,（コンマ）：その想定手順を打つ</li>
       <li> +（Ctrlなど、「意味のないキー」を押して離す）：表示されている想定手順を更新する</li>
      </ul>
 <li>石上に表示された d, e, f, ...：タグ文字時点の盤面を表示（+ Enter：その手に移動）</li>
 <li>空点に表示された d, e, f, ...：分岐を表示（+ Enter：その分岐に移動）</li>
</ul>

<a name="side-by-side">隣に並べて比較：</a>
「View」メニューの「碁盤二枚 A (盤面＋変化図) (Two boards A (main+PV))」を選んでおけば、二種類の手順を隣あわせで見くらべることができます。以下のキーを押し続けてください。
<ul>
 <li>1：エンジンの想定図と実際の手順（黒番と白番とで違うエンジンを使っているときは、双方の想定図）
 <li>分岐のd, e, f, ...：変化図と本手順</li>
</ul>

（普通に押す）
<ul>
 <li>Shift+z：表示の切り替え（現在の表示／素の碁盤）</li>
 <li>Tab：表示の切り替え（現在の表示／前の表示）</li>
 <li>;（セミコロン）：「<a href="#letmethink">まず考えさせて(Let me think first)</a>」スタイルで「次へ」</li>
      <ul>
       <li>1回目＝候補手を表示</li>
       <li>2回目＝候補手を消して一手進む</li>
      </ul>
</ul>

<h3>SGF</h3>
<ul>
 <li>Ctrl+c：SGFをクリップボードにコピー</li>
 <li>Ctrl+v：クリップボードからSGF, URL, 盤面画像を貼り付ける</li>
 <li>Ctrl+o：SGF（GIB, UGI, …）ファイルを開く</li>
 <li>Ctrl+s：SGFファイルの保存</li>
</ul>

<h3>エンジン</h3>
<ul>
 <li>Ctrl+r：エンジンをリセット</li>
 <li>Shift+l：ウェイトファイルをロード</li>
 <li>Ctrl+Shift+l：白番用ウェイトファイルをロード（訳注：AI対AIの観戦など、白番と黒番であえて違うウェイトを使いたいとき用）</li>
 <li>Ctrl+Shift+u：白番用エンジンのアンロード（訳注：上記をキャンセルして、白番でも黒番と同じエンジン・ウェイトを使う）</li>
</ul>

<hr>

<h2><a name="Katago">KataGo</a></h2>

<p>
KataGoを使用しているときは、「View」メニューに「スコアバー(Score bar)」や「勢力(Ownership)」が追加されます。Ownershipをオンにすると、各点の推定勢力が半透明の黒／白の背景で表示されます。さらに、「View」メニューの「碁盤二枚 A (盤面＋変化図) (Two boards A (main+PV))」または「碁盤二枚 D (素の碁盤＋変化図) (Two boards D (raw+PV))」を選んでおけば、勢力の標準偏差も、サブ碁盤に赤色の背景で表示されます。これはあたかも「KataGoの視線追跡ヒートマップ」のように見えます。
</p>

<p>
また、黒白の各領域の擬似的な目数（＝勢力の合計）が半透明の緑／ピンクの数字で表示されます。この数字は次のように計算されています。
<ul>
 <li>空点（および死石）の勢力だけを各領域で合計して表示。ただし白黒の境界線上はこの合計から除外。</li>
 <li>推定スコアとの補正値を碁盤の右上隅に「+n」として表示。理想的にはこの値は、中国ルールなどでは対局終了時の生き石数の差、日本ルールなどでは対局終了時のアゲハマの差に等しい。（訳注：実際には誤差あり）</li>
</ul>
したがって、(1)未来の石は考慮されず、(2)中立点（ダメ）も数えられるため、正しい「地の目数」とは言えません。なお、小さなフォントで表示されているのは、広い範囲の非常に小さい勢力を合計した値です。
</p>

<p>
悪手は石の上に三角形が表示されます（赤 = -5目、紫 = -2目）。三角形の濃さはその悪手が実際にとがめられたかを表します。「c」キーを押しながらその石をクリックすると、対応する手に移動します。「<」キーまたは「>」キーを押すと、そのようなミスを一つずつチェックすることができます。
</p>

<p>
盤面の小さな緑の四角とピンクの×は、最近の手で黒と白の可能性が高まっている箇所を示しています。「/」キーを押し続けると、以前の盤面（「最近の手」の前の盤面）を覗くことができます。
</p>

<p>
<a name="VKey">「v」キー</a>を押し続ければ、目数表示に対応する各領域の境界線と各点の勢力(10=100%, 9=90%, ...)を確認できます。「v」キーを押しながらマウスカーソルをメイン碁盤上または勝率グラフ上にかざすと、その時点の盤面と現在の盤面とを比較できます。
</p>

<p>
推定スコアは勝率グラフのオレンジ色の点で表示されます。上で述べた「最近の手」の開始点は、同グラフの「/」タグで表示されています。「c」キーを押しながらマウスカーソルをかざすと、指定した手からの勢力変化を見ることができます。
</p>

<p>
想定手順の表示では、必然性の高い手ほど大きい文字で番号が描かれます。また、各手の探索数が碁盤の右辺に表示されます（文字nの高さがn手目の探索数に相当）。碁盤右上の赤い数字は一手目の探索数です。
</p>

<p>
候補手の隅に表示される上向き・下向きの小さな青三角形は、「置き碁の上手・下手用AIが第一感で最も好む手」です（両者が異なる場合だけ表示）。勝率バー内では、上手っぽい手ほど「とがった扇形」で表示されます。
</p>

<hr>

<a name="Misc"></a>
<span class="ext" data-url="https://github.com/kaorahi/lizgoban">Project Home</span>
<span class="ext" data-url="https://github.com/kaorahi/lizgoban/blob/master/LICENSE.txt">License (GPL3)</span>

<hr>

<div class="nav">
 <a href="#Display">画面表示</a> |
 <a href="#Tips">小技いろいろ</a> |
 <a href="#Shortcut">ショートカットキー</a> |
 <a href="#Katago">KataGo</a> |
 <a href="#Misc">Link &amp; License</a>
</div>

</body>
